# 🤖 LLM 算法生成功能使用指南

## 📋 功能简介

本寻路算法可视化工具支持通过大型语言模型（LLM）生成自定义寻路算法。用户可以使用自然语言描述想要的算法，系统会自动生成可执行的Python代码并集成到可视化工具中。

## 🚀 支持的 LLM 提供商

### 1. 魔搭社区 (ModelScope)
- **API获取地址**: https://modelscope.cn
- **推荐模型**: Qwen/Qwen2.5-72B-Instruct
- **特点**: 中文支持优秀，适合生成中文描述的算法

### 2. 硅基流动 (SiliconFlow)
- **API获取地址**: https://siliconflow.cn
- **推荐模型**: Qwen/Qwen2.5-72B-Instruct
- **特点**: 性价比高，响应速度快

### 3. DeepSeek
- **API获取地址**: https://platform.deepseek.com
- **推荐模型**: deepseek-chat
- **特点**: 代码生成能力强，逻辑推理优秀

### 4. OpenRouter
- **API获取地址**: https://openrouter.ai
- **推荐模型**: anthropic/claude-3.5-sonnet
- **特点**: 支持多种模型，选择灵活

## 🛠️ 使用步骤

### 第一步：获取 API 密钥

1. 选择一个 LLM 提供商并注册账号
2. 进入开发者控制台或API管理页面
3. 创建新的 API 密钥
4. 复制密钥备用

### 第二步：配置 API 密钥

1. 在寻路算法可视化工具中点击"设置 LLM"按钮
2. 选择你要使用的 API 提供商
3. 在"API 密钥"输入框中粘贴你的密钥
4. 点击"保存密钥"按钮
5. 建议点击"测试连接"验证密钥是否有效

### 第三步：生成自定义算法

1. 在"算法描述"文本框中输入你想要的算法描述
2. 在"算法名称"输入框中为算法起个名字
3. 点击"生成算法"按钮
4. 等待生成完成，代码会显示在下方文本框中

### 第四步：使用自定义算法

1. 在"自定义算法"下拉菜单中选择你生成的算法
2. 确保网格已初始化，并设置了起点和终点
3. 点击"执行"按钮运行算法
4. 观察算法的寻路过程和结果

## 💡 算法描述示例

### 示例 1：贪心算法
```
一个贪心算法，总是选择距离终点最近的节点进行探索
```

### 示例 2：随机寻路
```
一种随机寻路算法，在每一步随机选择一个方向前进，直到找到终点或者无法继续前进
```

### 示例 3：深度优先搜索
```
实现深度优先搜索算法，沿着一个方向一直探索到尽头，然后回溯到上一个节点继续探索其他方向
```

### 示例 4：双向搜索
```
实现双向搜索算法，同时从起点和终点开始搜索，当两个搜索相遇时找到最短路径
```

### 示例 5：跳点搜索 (JPS)
```
实现跳点搜索算法，通过跳跃节点来优化搜索效率，特别适合网格地图
```

## ⚠️ 注意事项

### API 密钥安全
- API 密钥仅存储在当前会话中，刷新页面后需要重新输入
- 不要在不安全的环境中使用你的 API 密钥
- 建议定期更换 API 密钥

### 算法生成限制
- 生成的算法必须遵循统一的接口规范
- 算法应该能够正确处理障碍物
- 必须记录访问节点的顺序用于可视化
- 如果找不到路径，应该返回空列表

### 网络连接
- 生成算法需要稳定的网络连接
- API 调用可能需要几秒到几十秒不等
- 如果生成失败，请检查网络连接和 API 密钥

### 代码质量
- LLM 生成的代码可能包含错误
- 建议先在简单场景中测试算法
- 如果算法表现异常，可以尝试重新生成或修改描述

## 🔧 故障排除

### 问题 1：API 连接失败
**可能原因**：
- API 密钥错误或已过期
- 网络连接问题
- API 服务商服务器故障

**解决方法**：
- 检查 API 密钥是否正确
- 点击"测试连接"验证
- 尝试其他 API 提供商
- 检查网络连接

### 问题 2：算法生成失败
**可能原因**：
- 算法描述不够清晰
- API 限制或错误
- 生成代码包含语法错误

**解决方法**：
- 重新描述算法，尽量详细和具体
- 尝试不同的 API 提供商
- 增加技术细节的描述

### 问题 3：算法执行失败
**可能原因**：
- 生成的代码有逻辑错误
- 算法与网格系统不兼容
- 运行时异常

**解决方法**：
- 查看生成的代码，检查明显的错误
- 简化算法描述
- 重新生成算法

## 💰 成本估算

### API 调用成本
- **每次生成算法**: 大约消耗 2000-3000 tokens
- **成本估算**:
  - DeepSeek: ~¥0.01-0.02 每次生成
  - 硅基流动: ~¥0.02-0.03 每次生成
  - 魔搭社区: ~¥0.02-0.04 每次生成
  - OpenRouter: ~$0.002-0.004 每次生成

### 节省成本建议
- 先使用简单描述测试连接
- 一次生成满意的算法后多次使用
- 避免频繁生成和测试
- 选择性价比高的提供商

## 📈 最佳实践

### 算法描述技巧
1. **具体明确**: 详细说明算法的核心思想和实现步骤
2. **使用技术术语**: 使用"启发式"、"优先队列"、"广度优先"等专业术语
3. **提及数据结构**: 说明使用的队列、栈、堆等数据结构
4. **描述边界条件**: 说明如何处理找不到路径的情况

### 测试建议
1. **从简单开始**: 先在无障碍物的网格中测试
2. **逐步复杂**: 添加简单障碍物进行测试
3. **对比验证**: 与已知算法（如A*）进行结果对比
4. **性能观察**: 注意算法的时间和空间复杂度

## 🚀 进阶用法

### 组合算法
可以尝试生成结合多种算法思想的混合算法，例如：
```
一个结合贪心思想和随机性的算法，在每一步有70%的概率选择最优方向，30%的概率随机选择，以避免陷入局部最优
```

### 优化算法
针对特定场景优化算法：
```
一个适用于开放环境的快速寻路算法，假设大部分区域都是空地，算法应该优先朝目标方向前进，只在遇到障碍物时进行绕行
```

## 📞 技术支持

如果在使用过程中遇到问题：
1. 仔细阅读本指南的故障排除部分
2. 检查网络连接和 API 密钥状态
3. 尝试不同的算法描述
4. 查看浏览器控制台的错误信息

---

**🎯 提示**: 生成高质量的算法需要清晰的描述和充分的测试。建议从简单的算法开始，逐步尝试更复杂的实现！